---
import DocsLayout from '../layouts/DocsLayout.astro';
---

<DocsLayout title="API Reference" description="Complete API reference for all canisters">
  <article class="prose prose-invert max-w-none">
    <h1 class="text-4xl font-bold text-white mb-6">API Reference</h1>
    
    <p class="text-xl text-gray-300 mb-8">
      Complete documentation for all 9 specialized canisters with code examples and type definitions.
    </p>

    <h2 class="text-2xl font-bold text-white mt-12 mb-6">Core Canisters</h2>

    <div class="space-y-6">
      <div class="bg-gray-900 border border-cyan-500/30 rounded-lg p-6">
        <h3 class="text-xl font-semibold text-cyan-400 mb-2">dao_backend</h3>
        <p class="text-gray-400 mb-4">Main coordinator canister handling user management and admin operations.</p>
        <div class="flex gap-2">
          <span class="px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded text-sm">Coordinator</span>
          <span class="px-3 py-1 bg-purple-500/20 text-purple-400 rounded text-sm">User Management</span>
        </div>
        <div class="mt-4">
          <h4 class="text-white font-semibold mb-2">Key Methods:</h4>
          <ul class="text-gray-400 space-y-1 text-sm">
            <li>â€¢ <code class="text-cyan-400">initialize(name, description, admins)</code></li>
            <li>â€¢ <code class="text-cyan-400">registerUser(profile)</code></li>
            <li>â€¢ <code class="text-cyan-400">getUserProfile(principal)</code></li>
          </ul>
        </div>
      </div>

      <div class="bg-gray-900 border border-cyan-500/30 rounded-lg p-6">
        <h3 class="text-xl font-semibold text-cyan-400 mb-2">governance</h3>
        <p class="text-gray-400 mb-4">Voting mechanisms and proposal lifecycle management.</p>
        <div class="flex gap-2">
          <span class="px-3 py-1 bg-green-500/20 text-green-400 rounded text-sm">Voting</span>
          <span class="px-3 py-1 bg-blue-500/20 text-blue-400 rounded text-sm">Proposals</span>
        </div>
        <div class="mt-4">
          <h4 class="text-white font-semibold mb-2">Key Methods:</h4>
          <ul class="text-gray-400 space-y-1 text-sm">
            <li>â€¢ <code class="text-cyan-400">createProposal(title, description, category)</code></li>
            <li>â€¢ <code class="text-cyan-400">vote(proposalId, vote)</code></li>
            <li>â€¢ <code class="text-cyan-400">executeProposal(proposalId)</code></li>
          </ul>
        </div>
      </div>

      <div class="bg-gray-900 border border-cyan-500/30 rounded-lg p-6">
        <h3 class="text-xl font-semibold text-cyan-400 mb-2">staking</h3>
        <p class="text-gray-400 mb-4">Token locking, rewards distribution, and voting power calculation.</p>
        <div class="flex gap-2">
          <span class="px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded text-sm">Staking</span>
          <span class="px-3 py-1 bg-orange-500/20 text-orange-400 rounded text-sm">Rewards</span>
        </div>
        <div class="mt-4">
          <h4 class="text-white font-semibold mb-2">Key Methods:</h4>
          <ul class="text-gray-400 space-y-1 text-sm">
            <li>â€¢ <code class="text-cyan-400">stake(amount)</code></li>
            <li>â€¢ <code class="text-cyan-400">unstake(amount)</code></li>
            <li>â€¢ <code class="text-cyan-400">claimRewards()</code></li>
            <li>â€¢ <code class="text-cyan-400">getVotingPower(principal)</code></li>
          </ul>
        </div>
      </div>

      <div class="bg-gray-900 border border-cyan-500/30 rounded-lg p-6">
        <h3 class="text-xl font-semibold text-cyan-400 mb-2">treasury</h3>
        <p class="text-gray-400 mb-4">Multi-signature financial operations and balance tracking.</p>
        <div class="flex gap-2">
          <span class="px-3 py-1 bg-red-500/20 text-red-400 rounded text-sm">Finance</span>
          <span class="px-3 py-1 bg-pink-500/20 text-pink-400 rounded text-sm">Multi-sig</span>
        </div>
        <div class="mt-4">
          <h4 class="text-white font-semibold mb-2">Key Methods:</h4>
          <ul class="text-gray-400 space-y-1 text-sm">
            <li>â€¢ <code class="text-cyan-400">deposit(amount)</code></li>
            <li>â€¢ <code class="text-cyan-400">withdraw(recipient, amount)</code></li>
            <li>â€¢ <code class="text-cyan-400">getBalance()</code></li>
          </ul>
        </div>
      </div>
    </div>

    <h2 class="text-2xl font-bold text-white mt-12 mb-6">Support Canisters</h2>

    <div class="grid md:grid-cols-2 gap-4">
      <div class="bg-gray-900 border border-gray-800 rounded-lg p-4">
        <h3 class="text-lg font-semibold text-cyan-400 mb-2">dao_registry</h3>
        <p class="text-gray-400 text-sm">Global DAO discovery and search</p>
      </div>

      <div class="bg-gray-900 border border-gray-800 rounded-lg p-4">
        <h3 class="text-lg font-semibold text-cyan-400 mb-2">dao_analytics</h3>
        <p class="text-gray-400 text-sm">Platform metrics and time-series data</p>
      </div>

      <div class="bg-gray-900 border border-gray-800 rounded-lg p-4">
        <h3 class="text-lg font-semibold text-cyan-400 mb-2">proposals</h3>
        <p class="text-gray-400 text-sm">Proposal templates and categorization</p>
      </div>

      <div class="bg-gray-900 border border-gray-800 rounded-lg p-4">
        <h3 class="text-lg font-semibold text-cyan-400 mb-2">assets</h3>
        <p class="text-gray-400 text-sm">File storage with metadata and tags</p>
      </div>

      <div class="bg-gray-900 border border-gray-800 rounded-lg p-4">
        <h3 class="text-lg font-semibold text-cyan-400 mb-2">icrc1_ledger</h3>
        <p class="text-gray-400 text-sm">ICRC1 token standard implementation</p>
      </div>
    </div>

    <h2 class="text-2xl font-bold text-white mt-12 mb-6">Example Usage</h2>

    <div class="bg-gray-900 border border-gray-800 rounded-lg p-6">
      <h3 class="text-lg font-semibold text-cyan-400 mb-4">Creating a Proposal</h3>
      <pre class="bg-gray-950 rounded-lg p-4 overflow-x-auto"><code class="text-gray-300">import &#123; useGovernance &#125; from './hooks/useGovernance';

const MyComponent = () => &#123;
  const &#123; createProposal &#125; = useGovernance();

  const handleCreate = async () => &#123;
    try &#123;
      const result = await createProposal(&#123;
        title: "Increase Staking Rewards",
        description: "Proposal to increase rewards by 5%",
        category: "tokenomics"
      &#125;);
      console.log("Proposal created:", result);
    &#125; catch (error) &#123;
      console.error("Failed:", error);
    &#125;
  &#125;;

  return &lt;button onClick=&#123;handleCreate&#125;&gt;Create Proposal&lt;/button&gt;;
&#125;;</code></pre>
    </div>

    <div class="mt-8 bg-cyan-500/10 border border-cyan-500/30 rounded-lg p-6">
      <h3 class="text-lg font-semibold text-cyan-300 mb-2">ðŸ“– Full API Documentation</h3>
      <p class="text-gray-300 mb-4">
        For complete API documentation with all methods, parameters, and return types, see:
      </p>
      <a 
        href="https://github.com/tojo04/DAO_launcher_kit/blob/main/docs/API_DOCUMENTATION.md" 
        target="_blank"
        class="inline-flex items-center text-cyan-400 hover:text-cyan-300 font-semibold"
      >
        View Full API Documentation
        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
        </svg>
      </a>
    </div>
  </article>
</DocsLayout>
